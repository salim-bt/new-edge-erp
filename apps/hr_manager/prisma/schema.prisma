generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Staff {
  staff_ID                  Int            @id @default(autoincrement())
  first_name                String
  last_name                 String
  middle_name               String?
  gender                    Gender         @default(MALE)
  email                     String         @unique
  password                  String
  phone_number              String         @unique
  joining_date              DateTime       @default(now())
  cid                       String         @unique
  dob                       DateTime
  address                   String
  departmentDepartment_ID   Int?
  designationDesignation_ID Int?
  HOD                       HOD[]
  Leave                     Leave[]
  LeaveBalance              LeaveBalance[]
  Department                Department?    @relation(fields: [departmentDepartment_ID], references: [department_ID])
  Designation               Designation?   @relation(fields: [designationDesignation_ID], references: [designation_ID])
}

model LeaveBalance {
  leaveBalance_ID  Int    @id @default(autoincrement())
  casualBalance    Int    @default(5)
  medicalBalance   Int    @default(5)
  annualBalance    Int    @default(30)
  paternityBalance Int    @default(10)
  maternityBalance Int    @default(90)
  staffStaff_ID    Int?
  staff            Staff? @relation(fields: [staffStaff_ID], references: [staff_ID])
}

model HOD {
  hod_ID                  Int         @id @default(autoincrement())
  staffStaff_ID           Int?
  departmentDepartment_ID Int?
  joining_date            DateTime    @default(now())
  department              Department? @relation(fields: [departmentDepartment_ID], references: [department_ID])
  staff                   Staff?      @relation(fields: [staffStaff_ID], references: [staff_ID])
}

model Department {
  department_ID   Int     @id @default(autoincrement())
  department_name String
  description     String?
  HOD             HOD[]
  staffs          Staff[]
}

model Designation {
  designation_ID   Int     @id @default(autoincrement())
  designation_name String
  description      String?
  staffs           Staff[]
}

model Leave {
  leave_ID              Int         @id @default(autoincrement())
  leave_from            DateTime
  leave_to              DateTime
  leave_reason          String
  leaveTypeLeaveType_ID Int?
  staffStaff_ID         Int?
  status                LeaveStatus @default(PENDING)
  leaveType             LeaveType?  @relation(fields: [leaveTypeLeaveType_ID], references: [leaveType_ID])
  staff                 Staff?      @relation(fields: [staffStaff_ID], references: [staff_ID])
}

model LeaveType {
  leaveType_ID   Int     @id @default(autoincrement())
  leaveType_name String
  leaveBalance   Int
  description    String?
  leaves         Leave[]
}

enum Gender {
  MALE
  FEMALE
}

enum LeaveStatus {
  PENDING
  APPROVED
  REJECTED
}
